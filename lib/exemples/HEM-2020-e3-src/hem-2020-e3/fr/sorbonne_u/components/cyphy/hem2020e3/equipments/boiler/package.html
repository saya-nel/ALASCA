<!-- fr.sorbonne_u.components.cyphy.hem2020e3.equipments.boiler ------------ -->
<html>
<body>
<p><b>Boiler component for the Household Energy Management example.</b></p>

<table border="2" width="100%">
<tr><th align="left" colspan="1">Licence</th></tr>
<tr>
<td width="100%">
<p>Copyright Jacques Malenfant, Sorbonne Universite.</p>
<p>Jacques.Malenfant@lip6.fr</p>

<p>
This software is a computer program whose purpose is to provide an example
of a cyber-physical system.
</p>
<p>
This software is governed by the
<a href="../../../../images/Licence_CeCILL-C_V1-en.html">CeCILL-C</a>
license under French law and
abiding by the rules of distribution of free software.  You can use,
modify and/ or redistribute the software under the terms of the
CeCILL-C license as circulated by CEA, CNRS and INRIA at the following
URL <a href="http://www.cecill.info">http://www.cecill.info</a>.
</p>
<p>
As a counterpart to the access to the source code and  rights to copy,
modify and redistribute granted by the license, users are provided only
with a limited warranty  and the software's author,  the holder of the
economic rights,  and the successive licensors  have only  limited
liability. 
</p>
<p>
In this respect, the user's attention is drawn to the risks associated
with loading,  using,  modifying and/or developing or reproducing the
software by the user in light of its specific status of free software,
that may mean  that it is complicated to manipulate,  and  that  also
therefore means  that it is reserved for developers  and  experienced
professionals having in-depth computer knowledge. Users are therefore
encouraged to load and test the software's suitability as regards their
requirements in conditions enabling the security of their systems and/or 
data to be ensured and,  more generally, to use and operate it in the 
same conditions as regards security. 
</p>
<p>
The fact that you are presently reading this means that you have had
knowledge of the CeCILL-C license and that you accept its terms.
</p>
</td>
</tr>
</table>

<p>
This package defines a boiler used in the Household Energy Management example.
This boiler is meant to be used in a SIL simulation and to show good software
decomposition. For the latter purpose, the boiler is made of two distinct
components: one is the boiler itself, the other is the reactive controller
that implements the water temperature control.
</p>
<p>
The boiler component represents a standard water boiler with its water tank
that can be heated. This component offers two component interfaces to the
reactive controller: a sensor interface allowing to get the current water
temperature and an actuator interface allowing to start and stop the heating
of the water. The boiler components also offers a component interface to an
energy management system allowing to be it in a passive or an active mode.
In the passive mode, the heating cannot be put on even if the water temperature
drops under its target temperature.
</p>
<p>
The boiler reactive controller implements a standard fixed-period reactive
controller with a target temperature and some hysteresis. At each period, the
controller gets the water temperature from the boiler component (using the
sensor interface) and then decide whether the heating must be put on, off (using
the actuator interface) or kept as is (<i>i.e.</i>, do nothing).
</p>
<p>
In an real component integrated with a real boiler, the sensor and the actuator
would be actual devices. Here, the are simulated using DEVS simulations of
the water temperature. The boiler component illustrates the connection between
the software and the simulation: the sensor gets the value of the water
temperature from the simulation model corresponding variable, while the
actions are represented by events transmitted to the model to force it to
change its behaviour (heating, active, ...). The other way around is also
important: the boiler simulator calls the component to know its state
(heating, active, ...) and therefore adapt its behaviour. The simulation
architecture that will be executed by the boiler component is created and
executed through the plug-in <code>BoilerRTAtomicSimulatorPlugin</code>;
it is connected with the rest of the simulation through the supervisor
component <code>HEMSimulationSupervisor</code>.
</p>
<p>
In the HEM example, the purpose of this simulation is to obtain the electricity
consumption of the boiler. This consumption is also simulated, but as this
simulation model computes a continuous variable which is exported to the
simulation model of the electric meter, it must be co-located with the latter
model to connect their imported/exported variables. Hence, the boiler electrical
simulation model is deployed on the electric meter component and the boiler
simulation model exports events that trigger electricity consumption changes.
</p>
<p>
The interaction between the component software and the simulation models is
important to understand. For example, consider the action of the reactive
controller to start the heating. Here is the sequence of actions that will
take place:
</p>
<ol>
<li>First, the boiler reactive controller control loop will call the actuator
  <code>this.actuatorOBP.startHeating()</code>, which will call the service
  <code>heatingSwitch</code> with the parameter true.</li>
<i>The execution of this service will pass the boiler to the heating state
  and then it will trigger to immediate occurrence of the event
  <code>Heat</code> on the simulation model <code>BoilerWaterSILModel</code>.
  </li>
<li>The execution of this external event on the simulation model
  <code>BoilerWaterSILModel</code> will in turn trigger the execution of an
  immediate internal transition on this model.</li>
<li>The execution if this internal transition will propagate the event
  <code>Heat</code> to the simulation model
  <code>BoilerElectricalSILModel</code> that will update the boiler
  electricity consumption. It will also force the computation of the
  water temperature at this instant and update the derivative of the
  differential equation to take into account that now the boiler is heating.
  To do so, the simulation model <code>BoilerWaterSILModel</code> calls the
  boiler component methods <code>active</code> and <code>isHeating</code>
  to get the state of the boiler.</li>
</ol>
<p>
The other actions are treated similarly, with their own events.
</p>
</body>
</html>
<!-- ----------------------------------------------------------------------- -->
